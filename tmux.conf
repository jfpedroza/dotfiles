# Based on
# https://github.com/sbernheim4/dotfiles/blob/master/.tmux.conf

#############################
########## Settings
#############################

# Use vi keys in copy-mode
set -g mode-keys vi

# Start window and pane indices at 1.
set -g base-index 1
set -g pane-base-index 1

# Status refresh interval
set -g status-interval 5

# length of tmux status line
set -g status-left-length 30
set -g status-right-length 150

set -g status-left "#[bg=colour7]#[fg=black]#{?client_prefix,#[bg=green],} ‚ùê #S #[bg=black]#[fg=colour7]#{?client_prefix,#[fg=green],}ÓÇ∞ #{?window_zoomed_flag,üîç ,}"
set -g status-right "#[bg=colour238]#[fg=green]ÓÇ≤#[bg=green]#[fg=black] #{b:pane_current_path} #[bg=green]#[fg=colour8]ÓÇ≤#[bg=colour8]#[fg=#(~/dotfiles/tmux_scripts/battery.sh color)] ‚ô• #(~/dotfiles/tmux_scripts/battery.sh) #[bg=colour8]#[fg=red]ÓÇ≤#[bg=red]#[fg=black] üïë%I:%M %p %d-%b  "

# Set the background color
set -g status-bg colour238

# customize how windows are displayed in the status line
set -g window-status-separator ""
set -g window-status-current-format "#{?#{==:#I,1},#[fg=black]#[bg=blue]ÓÇ∞,}#[fg=colour7]#[bg=blue] #I#F ÓÇ±#[fg=colour7] #W #[fg=#(~/dotfiles/tmux_scripts/window_color.sh fg #{session_windows} #I #{session_stack}})]#[bg=#(~/dotfiles/tmux_scripts/window_color.sh bg #{session_windows} #I #{session_stack}})]ÓÇ∞"
set -g window-status-format "#{?#{==:#I,1},#[fg=black]#[bg=black]ÓÇ∞,}#[fg=colour250]#[bg=black]#I#F#[fg=colour244] ÓÇ± #W #[fg=#(~/dotfiles/tmux_scripts/window_color.sh fg #{session_windows} #I #{session_stack}})]#[bg=#(~/dotfiles/tmux_scripts/window_color.sh bg #{session_windows} #I #{session_stack}})]ÓÇ∞"

# Set the history limit so we get lots of scrollback.
setw -g history-limit 50000

#############################
########## Bindings
#############################

# Turn the mouse on, but without copy mode dragging
set -g mouse on
unbind -n MouseDrag1Pane
unbind -Tcopy-mode MouseDrag1Pane

# Use { and } to split a window vertically and horizontally instead of " and % respectively
bind { split-window -h -c "#{pane_current_path}"
bind } split-window -v -c "#{pane_current_path}"
unbind '"'
unbind %

# Switch betewen panes using alt + arrow
bind -n M-Left select-pane -L
bind -n M-Right select-pane -R
bind -n M-Up select-pane -U
bind -n M-Down select-pane -D

# Use ctrl + arrow to move between windows in a session
bind -n C-Left  previous-window
bind -n C-Right next-window

# Use r to quickly reload tmux settings
unbind r
bind r \
	source-file ~/.tmux.conf \;\
	display 'Reloaded tmux config'

# Setup 'v' to begin selection, just like Vim
bind-key -T copy-mode-vi 'v' send -X begin-selection

 # Setup 'y' to yank (copy), just like Vim
bind-key -T copy-mode-vi 'y' send -X copy-pipe-and-cancel "xclip -sel clip"
bind-key -T copy-mode-vi 'V' send -X select-line
